---
---
<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>1101 E. University: Departures</title>
        <meta name="description" content="Departures for MTD office building">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="google" content="notranslate" />
        <meta http-equiv="Content-Language" content="en_US" />

		<link href="css/site.css" rel="stylesheet">
        
        <link href="favicon.ico" rel="icon" type="image/x-icon" />        
    </head>
    <body>
        <main>
            <article id="departures">
                <div data-bind="foreach: departures, visible: !showNote()">
                    <section class="card departure">
                        <span class="bubble"  data-bind="attr: { style: 'background-color: ' + routeColor + ';color: ' + routeColor  }, css: { hopper: isHopper }"></span>
                        <div class="content">
                            <h1 class="headsign" data-bind="text: headsign"></h1>
                            <h2 class="boarding-point" data-bind="text: stopLocation"></h2>
                            <p class="time">
                                <span class="mins" data-bind="text: expectedText, css: { scheduled: !isMonitored }"></span>
                                <span class="label" data-bind="visible: showMins">min<span data-bind="visible: showS">s</span></span>
                            </p>
                        </div>
                    </section>
                </div>
                <aside id="note" class="note" data-bind="visible: showNote">
                    <p class="note-text" data-bind="text: note"></p>
                </aside>
            </article>
            <aside id="clock" class="card clock">
                <p class="time" data-bind="text: formattedTime"></p>
            </aside>
        </main>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js" integrity="sha384-tvhEVHsrzai+guUF4cd0SVl6+tXsWu2ioLB3VR9mjkFuw3fevJVq6aJtxqTLhIv6" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js" integrity="sha384-ohw6o2vy/chIavW0iVsUoWaIPmAnF9VKjEMSusADB79PrE3CdeJhvR84BjcynjVl" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
        <script src="js/departures-view-model.js"></script>
        <script src="js/time-view-model.js"></script>
        <script src="js/departure.js"></script>
        <script src="js/departure-update-service.js"></script>
        <script>
            (function() {
                
                // setup departures
                var viewModel = new DeparturesViewModel(new DepartureUpdateService());
                ko.applyBindings(viewModel, document.getElementById('departures'));
                viewModel.startUpdates();
                
                // setup clock
                ko.applyBindings(new TimeViewModel(), document.getElementById('clock'));
                
                // reload the page once a day
                window.setTimeout(function() {
                    window.location.reload(true);
                }, 1440000); // 24 hours
                
            })();
        </script>
    </body>
</html>
